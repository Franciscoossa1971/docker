<!-- Formulario de persona -->
<h2 class="mb-4 mt-4 text-center text-primary">Gesti√≥n de Personas</h2>

<div
  class="d-flex justify-content-center align-items-center"
  style="min-height: 50vh"
>
  <div class="card shadow-sm" style="width: 100%; max-width: 500px">
    <div class="card-body">
      <form
        [formGroup]="personaForm"
        (ngSubmit)="guardar()"
        class="needs-validation"
        novalidate
      >
        <!-- Nombre -->
        <div class="mb-3">
          <label for="nombre" class="form-label">Nombre:</label>
          <input
            id="nombre"
            formControlName="nombre"
            type="text"
            class="form-control"
            [class.is-invalid]="controlInvalido('nombre')"
            required
          />
          <div class="invalid-feedback" *ngIf="controlInvalido('nombre')">
            El nombre es obligatorio.
          </div>
        </div>

        <!-- Email -->
        <div class="mb-3">
          <label for="email" class="form-label">Email:</label>
          <input
            id="email"
            formControlName="email"
            type="email"
            class="form-control"
            [class.is-invalid]="controlInvalido('email')"
            required
          />
          <div class="invalid-feedback" *ngIf="controlInvalido('email')">
            Ingresa un email v√°lido.
          </div>
        </div>

        <!-- Tel√©fono -->
        <div class="mb-3">
          <label for="telefono" class="form-label">Tel√©fono:</label>
          <input
            id="telefono"
            formControlName="telefono"
            type="text"
            class="form-control"
            [class.is-invalid]="controlInvalido('telefono')"
            required
          />
          <div class="invalid-feedback" *ngIf="controlInvalido('telefono')">
            El tel√©fono es obligatorio.
          </div>
        </div>

        <!-- DNI -->
        <div class="mb-3">
          <label for="dni" class="form-label">DNI:</label>
          <input
            id="dni"
            formControlName="dni"
            type="text"
            class="form-control"
            [class.is-invalid]="controlInvalido('dni')"
            required
          />
          <div class="invalid-feedback" *ngIf="controlInvalido('dni')">
            El DNI es obligatorio.
          </div>
        </div>

        <!-- Direcci√≥n -->
        <div class="mb-4">
          <label for="direccion" class="form-label">Direcci√≥n:</label>
          <input
            id="direccion"
            formControlName="direccion"
            type="text"
            class="form-control"
            [class.is-invalid]="controlInvalido('direccion')"
            required
          />
          <div class="invalid-feedback" *ngIf="controlInvalido('direccion')">
            La direcci√≥n es obligatoria.
          </div>
        </div>

        <!-- Botones -->
        <div class="d-flex gap-2 justify-content-center">
          <button
            type="submit"
            class="btn btn-primary"
            [disabled]="personaForm.invalid"
          >
            {{ modoEdicion ? "Actualizar" : "Guardar" }}
          </button>
          <button type="button" class="btn btn-secondary" (click)="cancelar()">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<hr class="my-5" />

<!-- Lista de personas -->
<h3 class="text-center mb-4">Lista de Personas</h3>

<div *ngIf="personas && personas.length > 0; else sinPersonas">
  <ul class="list-group px-4" style="font-size: 1.1rem">
    <!-- Elementos de la lista para cada persona -->
    <li
      *ngFor="let p of personas"
      class="list-group-item d-flex justify-content-between align-items-center mb-2"
      style="font-size: 1.2rem"
    >
      <div>
        <strong>{{ p.nombre }}</strong
        ><br />
        <span class="text-muted">{{ p.email }}</span
        ><br />
        <span class="text-muted">Tel√©fono: {{ p.telefono }}</span
        ><br />
        <span class="text-muted">DNI: {{ p.dni }}</span
        ><br />
        <span class="text-muted">Direcci√≥n: {{ p.direccion }}</span>
      </div>

      <div class="btn-group">
        <!-- Bot√≥n de editar -->
        <button class="btn btn-warning btn-sm" (click)="editar(p)">
          ‚úèÔ∏è Editar
        </button>
        <!-- Bot√≥n de eliminar -->
        <button class="btn btn-danger btn-sm" (click)="eliminar(p.id!)">
          üóëÔ∏è Eliminar
        </button>
      </div>
    </li>
  </ul>
</div>

<!-- Mensaje si no hay personas -->
<ng-template #sinPersonas>
  <p class="text-center text-danger">No hay personas registradas.</p>
</ng-template>
